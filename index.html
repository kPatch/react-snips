<!DOCTYPE html>
<html lang="en">
<head>
	<script src="https://fb.me/react-with-addons-0.14.2.js"></script>
	<script src="https://fb.me/react-dom-0.14.2.js"></script>
	<meta charset="UTF-8">
	<title></title>

	<link rel="stylesheet" type="text/css" href="style.css">

	<script type="text/jsx;harmony=true">
		var TreeNode = React.createClass({
		  getInitialState: function() {
		    return {
		      visible: true
		    };
		  },
		  render: function() {
		    var childNodes;
		    var classObj;

		    if (this.props.node.childNodes != null) {
		      childNodes = this.props.node.childNodes.map(function(node, index) {
		        return <li key={index}><TreeNode node={node} /></li>
		      });

		      classObj = {
		        togglable: true,
		        "togglable-down": this.state.visible,
		        "togglable-up": !this.state.visible
		      };
		    }

		    var style;
		    if (!this.state.visible) {
		      style = {display: "none"};
		    }

		    return (
		      <div>
		        <h5 onClick={this.toggle} className={React.addons.classSet(classObj)}>
		          {this.props.node.title}
		        </h5>
		        <ul style={style}>
		          {childNodes}
		        </ul>
		      </div>
		    );
		  },
		  toggle: function() {
		    this.setState({visible: !this.state.visible});
		  }
		});

		var tree = {
		  title: "TEST",
		  childNodes: [
		    {title: "child 1"},
		    {title: "child 2", childNodes: [
		      {title: "child2.1", childNodes: [
		        {title: "child2.1.1"}
		      ]},
		      {title: "child2.2"}
		    ]}
		  ]
		};

		React.render(
		  <TreeNode node={tree} />,
		  document.getElementById("tree")
		);
	</script>	

</head>
<body>
	<h3>Testing <code>TreeNodes</code> </h3>
	<p>Edit the <code>tree</code> variable to change the tree</p>
	<div id="tree"></div>
</body>
</html>